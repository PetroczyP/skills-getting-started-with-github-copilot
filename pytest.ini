[pytest]
pythonpath = .

# Marker definitions (also registered in conftest.py)
markers =
    test_id(id): Test case identifier for traceability
    functional: Functional API tests
    infrastructure: Infrastructure and setup tests
    capacity: Capacity enforcement tests
    language: Bilingual functionality tests
    bdd: BDD scenario tests (from .feature files)
    e2e: End-to-end UI tests (Playwright)
    ui: UI component tests (Playwright)
    visual: Visual regression tests (Playwright screenshots)
    slow: Slow-running tests (deselect with '-m "not slow"')
    concurrency: Tests using threading/concurrent execution

# Usage examples for race condition tests:
# Run fast tests only (skip slow race condition tests):
#   pytest -m "not slow"
# Run only race condition tests:
#   pytest -m concurrency
# Run all tests including race conditions:
#   pytest
# Enable verbose metrics collection:
#   RACE_TEST_METRICS=true pytest
# CI mode with extended timeouts:
#   RACE_TEST_BARRIER_TIMEOUT=60 pytest

# Coverage configuration
addopts = 
    --strict-markers
    -v

# BDD configuration
bdd_features_base_dir = tests/features/

# Playwright configuration
# Default browser (can override with --browser flag)
# Options: chromium, firefox, webkit, or all for parallel execution
# Example: pytest --browser chromium
# Example: pytest --browser firefox --browser webkit
# Note: Browsers are installed via 'playwright install chromium firefox webkit'
